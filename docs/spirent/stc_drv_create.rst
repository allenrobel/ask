**************************************************
StcDrvCreate() - spirent/stc_drv_create.py
**************************************************

.. contents::
   :local:
   :depth: 1

ScriptKit Synopsis
------------------
StcDrvCreate() creates a Dynamic Result View (DRV) on a 
set of Spirent ports.

It generates Ansible task instances conformant with Spirent's
Ansible implementation for their LabServer + TestCenter products.
These task instances can then be passed to Playbook().add_task()

Ansible Module Documentation
----------------------------

    - `Spirent stc-ansible <https://github.com/Spirent/stc-ansible>`_

Prerequisites
-------------

    1.  To run the playbook generated by StcDrvCreate(),
        `Spirent stc-ansible <https://github.com/Spirent/stc-ansible>`_ 
        and its dependencies (e.g. paramiko) must be installed.

ScriptKit Example
-----------------

    - `unit_test/spirent/unit_test_stc_drv_create.py <https://github.com/allenrobel/ask/blob/main/unit_test/spirent/unit_test_stc_drv_create.py>`_

Properties
----------

====================================    ==================================================
Property                                Description
====================================    ==================================================
disable_auto_grouping                   Disable grouping of results::

                                            - Type: bool()
                                            - Valid values: False, True
                                            - Default: True
                                            - Spirent name: DisableAutoGrouping
                                            - Examples:
                                                - task.disable_auto_grouping = True

drv_name                                Name of the Dynamic Result View::

                                            - Type: str()
                                            - Spirent name: ['DynamicResultView']['name']
                                            - Default: "Dropped Frames DRV"
                                            - Examples:
                                                - task.drv_name = 'RxResults'

from_objects                            The set of Spirent objects to query for results::

                                            - Type: str()
                                            - Default: ref:/project/port
                                            - Spirent name: FromObjects
                                            - Examples:
                                                - task.from_objects = 'ref:/project/port'

limit_size                              Limit the size of the collected results to X entries::

                                            - Type: int()
                                            - Spirent name: LimitSize
                                            - Default: 20000
                                            - Examples:
                                                - task.limit_size = 15000

reset_existing                          Reset any existing results::

                                            - Type: bool()
                                            - Valid values: False, True
                                            - Default: False
                                            - Spirent name: ResetExisting
                                            - Examples:
                                                - task.reset_existing = True


select_properties                       Add one or more property filters which determine what
                                        results are collected. This is additive, so each time
                                        it is called, the filter is added to the filters that 
                                        have previously been added.::

                                            - Type: str()
                                            - Spirent name: SelectProperties
                                            - Default:  If select_properties is not set, the following 
                                                        results are collected:
                                                - StreamBlock.DroppedFrameCount
                                                - StreamBlock.DroppedFrameDuration
                                                - StreamBlock.Name
                                                - StreamBlock.RxSigFrameRate

                                            - Example (collect results for these three filters)
                                                - task.select_properties = 'StreamBlock.ActualRxPortName'
                                                - task.select_properties = 'StreamBlock.RxSigFrameCount'
                                                - task.select_properties = 'StreamBlock.RxSigFrameRate'
                                            - Example filters
                                                - Port.Name
                                                - StreamBlock.StreamId
                                                - StreamBlock.ActualRxPortName
                                                - StreamBlock.DroppedFrameCount
                                                - StreamBlock.DroppedFrameDuration
                                                - StreamBlock.DuplicateFrameCount
                                                - StreamBlock.FrameConfig.ipv4:IPv4.1.sourceAddr
                                                - StreamBlock.FrameConfig.ipv4:IPv4.1.destAddr
                                                - StreamBlock.FrameConfig.ethernet:EthernetII.1.srcMac
                                                - StreamBlock.FrameConfig.ethernet:EthernetII.vlans.Vlan.1.id
                                                - StreamBlock.IsExpected
                                                - StreamBlock.AvgLatency
                                                - StreamBlock.MaxLatency
                                                - StreamBlock.MinLatency
                                                - StreamBlock.Name
                                                - StreamBlock.RxSigFrameCount
                                                - StreamBlock.RxSigFrameRate
                                                - StreamBlock.TxFrameCount
                                                - StreamBlock.TxFrameRate

sort_by                                 Filter by which to sort the result.::

                                            - Type: str()
                                            - Spirent name: SortBy
                                            - Default: results are not sorted
                                            - Example
                                                - task.sort_by = 'StreamBlock.RxSigFrameCount'

sort_direction                          Direction in which to sort the results.::

                                            - Type: str()
                                            - Spirent name: none
                                            - Valid values: ASCENDING, DESCENDING
                                            - Default: ASCENDING
                                            - Example
                                                - task.sort_direction = 'DESCENDING'

where_conditions                        Determines if a given result should be added based on
                                        the result value. Conditions are composed of the following,
                                        may be joined with AND/OR, and are enclosed in curly-brackets.::

                                            select_property [ > | < | >= | <= | != | == ] <value>

                                            Example:

                                            StreamBlock.DroppedFrameCount > 0

                                            - Type: str()
                                            - Spirent name: WhereConditions
                                            - Default: No conditions are used to filter results
                                            - Example:
                                                - task.where_conditions = "{StreamBlock.DroppedFrameCount > 0 AND StreamBlock.IsExpected = 1}"

====================================    ==================================================
